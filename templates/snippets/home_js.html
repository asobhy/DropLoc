

<script>
     const addPhotoBtn = document.querySelector('#addphotoBtn')
    const photoBtn = document.querySelector('#photoBtn')
    const photoid = document.querySelector('#photoid')
    const cancelBtn = document.querySelector('#cancelBtn')
    const postBtn = document.querySelector('#postbtnid')
    const postInput = document.querySelector('#postinputid')
    const photoBtn1 = document.querySelector('#photoBtn1')
    //const idProfileImage = document.querySelector('#id_profile_image')

    var cropper;
	var imageFile;
	var base64ImageString;
	var cropX;
	var cropY;
	var cropWidth;
	var cropHeight;

    function readURL(input){
		if(input.files && input.files[0]){
			var reader = new FileReader()

			reader.onload = function(e){
				//disableImageOverlay()
				var image = e.target.result
				var imageField = document.getElementById("id_profile_image_display")
				imageField.src = image
				cropper = new Cropper(imageField, {
					aspectRatio: 1/1,
					crop(event){
						console.log("CROP START")
						console.log("x: " + event.detail.x)
						console.log("y: " + event.detail.y)
						console.log("width: " + event.detail.width)
						console.log("height: " + event.detail.height)
						setImageCropProperties(
							image,
							event.detail.x,
							event.detail.y,
							event.detail.width,
							event.detail.height
						)
					}
				})
			}

			reader.readAsDataURL(input.files[0])
		}
	}
    



// <!------------ Script to add post photo view Button --------------->

    const photoViewButton = (e) =>{
        e.preventDefault()
        photoBtn.style.display = "block"
    }
    addPhotoBtn.addEventListener('click', photoViewButton)
    photoid.addEventListener('click', photoViewButton)

//<----------------- END ---------------------------------------->     
    

// <!------------ Script to remove post photo view Button -------------->

    cancelBtn.addEventListener('click', (e) =>{
        e.preventDefault()
        photoBtn.style.display = "none"
    })

// <----------------- END ---------------------------------------->



// <-------------- Script to create a post ----------------------->

postBtn.addEventListener('click', (e) =>{
    e.preventDefault()
    var inputPostValue = postInput.value.trim()
    fetch(`${url}/create-post/`, {
        body: JSON.stringify({
            inputPostValue: inputPostValue
        }),
        method: 'POST',
        headers:{
            'X-CSRFToken': "{{csrf_token}}",
            "Content-Type": "application/json"
        }
    }).then((res) => res.json()).then((data) =>{
        console.log(data)
    })
    window.location.reload()
})

// <------------------------- END --------------------------------------->



// <-------------- Script Enabling and disablng button -------------------->

postInput.addEventListener('keyup', (e) =>{
    e.preventDefault()
    
    if(e.target.value.length > 0){
        postBtn.removeAttribute('disabled')
    }else{
        postBtn.setAttribute('disabled', 'disabled')
    }
})

// <------------------------------- END -------------------------------------->


imageContainer.addEventListener("click", function(event){
	document.getElementById("id_profile_image").click()
})





</script>




